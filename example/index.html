<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>bb-msg-history</title>
  <script src="../dist/index.js" type="module"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: #222;
      background: #fff;
      line-height: 1.7;
      padding: 80px 20px;
    }

    .wrap {
      max-width: 680px;
      margin: 0 auto;
    }

    header {
      margin-bottom: 80px;
    }

    h1 {
      font-size: 24px;
      font-weight: 500;
      letter-spacing: -0.02em;
      margin-bottom: 12px;
    }

    .lead {
      color: #666;
      font-size: 16px;
    }

    section {
      margin-bottom: 60px;
    }

    h2 {
      font-size: 13px;
      font-weight: 400;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 24px;
    }

    code {
      font-family: "SF Mono", Monaco, monospace;
      font-size: 13px;
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 2px;
    }

    pre {
      background: #f5f5f5;
      padding: 20px;
      overflow-x: auto;
      border-radius: 2px;
    }

    pre code {
      background: none;
      padding: 0;
    }

    .card {
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 16px;
    }

    .install {
      background: #fafafa;
      padding: 24px;
      border-radius: 2px;
    }

    .install p {
      margin-bottom: 12px;
      font-size: 14px;
      color: #666;
    }

    .install pre {
      background: #fff;
      border: 1px solid #eee;
    }

    @media (prefers-color-scheme: dark) {
      body { background: #111827; color: #e5e7eb; }
      .lead { color: #9ca3af; }
      h2 { color: #6b7280; }
      code { background: #1f2937; color: #e5e7eb; }
      pre { background: #1f2937; color: #e5e7eb; }
      .install { background: #1f2937; }
      .install p { color: #9ca3af; }
      .install pre { background: #111827; border-color: #374151; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>&lt;bb-msg-history /&gt;</h1>
      <p class="lead">A chat-style message history web component.</p>
    </header>

    <!-- 0.  -->
    <section>
      <h2>DEMO - svg avatar</h2>
      <div class="card">
        <bb-msg-history>
          bbki.ng: è°å‘€ï¼Ÿ
          xwy: è°è°è°ï¼Œä½ çŒ´çˆ·çˆ·ï¼
        </bb-msg-history>
      </div>

      <pre><code>&lt;bb-msg-history&gt;
  bbki.ng: è°å‘€ï¼Ÿ
  xwy: è°è°è°ï¼Œä½ çŒ´çˆ·çˆ·ï¼
&lt;/bb-msg-history&gt;</code></pre>
    </section>

    <!-- 1. åŸºæœ¬ç”¨æ³•ï¼šé»˜è®¤é¦–å­—æ¯å¤´åƒ -->
    <section>
      <h2>Basic â€” letter avatars</h2>
      <div class="card">
        <bb-msg-history>
          alice: Hey, are you free this weekend?
          bob: Sounds good! When?
          alice: Saturday morning, around 10?
          bob: Perfect. See you then!
        </bb-msg-history>
      </div>

      <pre><code>&lt;bb-msg-history&gt;
  alice: Hey, are you free this weekend?
  bob: Sounds good! When?
&lt;/bb-msg-history&gt;</code></pre>
    </section>

    <!-- 2. è‡ªå®šä¹‰å¤´åƒï¼šemojiã€imgã€sideã€é¢œè‰² -->
    <section>
      <h2>Custom avatars â€” setAuthor()</h2>
      <div class="card">
        <bb-msg-history id="custom-avatar-demo">
          me: Hey there!
          me: How's it going?
          friend: Pretty good, thanks!
          friend: What are you up to?
          me: Just trying out this component
          friend: Looks great!
        </bb-msg-history>
      </div>
      <script>
        customElements.whenDefined('bb-msg-history').then(() => {
          const el = document.getElementById('custom-avatar-demo');
          el.setAuthor('me', { avatar: 'ğŸ±', side: 'right', bubbleColor: '#f3f4f6' });
          el.setAuthor('friend', { avatar: 'ğŸ¶', side: 'left', bubbleColor: '#e0f2fe' });
        });
      </script>

      <pre><code>el.setAuthor('me', { avatar: 'ğŸ±', side: 'right', bubbleColor: '#f3f4f6' });
el.setAuthor('friend', { avatar: 'ğŸ¶', side: 'left', bubbleColor: '#e0f2fe' });</code></pre>
    </section>

    <!-- 3. è¿ç»­æ¶ˆæ¯åˆ†ç»„ï¼šåŒä¸€ä½œè€…è¿ç»­å‘é€ï¼Œåç»­æ¶ˆæ¯å¤´åƒéšè— -->
    <section>
      <h2>Consecutive messages â€” avatar grouping</h2>
      <div class="card">
        <bb-msg-history id="consecutive-demo">
          alice: First message
          alice: Second message, avatar hidden
          alice: Third, still hidden
          bob: Got it!
          bob: I'll send two as well
        </bb-msg-history>
      </div>
      <script>
        customElements.whenDefined('bb-msg-history').then(() => {
          const el = document.getElementById('consecutive-demo');
          el.setAuthor('alice', { avatar: 'ğŸ‘©', side: 'right' });
          el.setAuthor('bob', { avatar: 'ğŸ‘¨', side: 'left', bubbleColor: '#ecfdf5' });
        });
      </script>
    </section>

    <!-- 4. æœªçŸ¥ä½œè€…ï¼šè‡ªåŠ¨ç”Ÿæˆé¦–å­—æ¯å¤´åƒï¼Œé»˜è®¤å·¦ä¾§æ˜¾ç¤º -->
    <section>
      <h2>Unknown authors â€” letter avatars</h2>
      <div class="card">
        <bb-msg-history>
          alice: Hello!
          bob: Hi there!
          charlie: Hey everyone!
          alice: Nice to meet you all
        </bb-msg-history>
      </div>
    </section>

    <!-- 5. æ¨¡ç³ŠåŒ¹é…ï¼šä½œè€…ååŒ…å«å·²é…ç½® key æ—¶å¤ç”¨é…ç½® -->
    <section>
      <h2>Fuzzy matching â€” author name contains configured key</h2>
      <div class="card">
        <bb-msg-history id="fuzzy-demo">
          alice: Normal message from alice
          alice(phone): This name contains "alice", reuses her config
          alice_work: This too!
          bob: Just bob
        </bb-msg-history>
      </div>
      <script>
        customElements.whenDefined('bb-msg-history').then(() => {
          const el = document.getElementById('fuzzy-demo');
          el.setAuthor('alice', { avatar: 'ğŸ‘©', side: 'right', bubbleColor: '#e0f2fe' });
          el.setAuthor('bob', { avatar: 'ğŸ‘¨', side: 'left' });
        });
      </script>

      <pre><code>// "alice(phone)" and "alice_work" fuzzy-match "alice"
el.setAuthor('alice', { avatar: 'ğŸ‘©', side: 'right', bubbleColor: '#fef3c7' });</code></pre>
    </section>

    <!-- 6. å•æ¡æ¶ˆæ¯ -->
    <section>
      <h2>Single message</h2>
      <div class="card">
        <bb-msg-history>
          alice: Just one message, renders fine
        </bb-msg-history>
      </div>
    </section>

    <!-- 7. é•¿æ–‡æœ¬æ¢è¡Œ -->
    <section>
      <h2>Long text â€” word wrap</h2>
      <div class="card">
        <bb-msg-history>
          alice: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
          bob: è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„ä¸­æ–‡æ¶ˆæ¯ï¼Œç”¨æ¥æµ‹è¯•ä¸­æ–‡ç¯å¢ƒä¸‹çš„è‡ªåŠ¨æ¢è¡Œæ•ˆæœã€‚æ¶ˆæ¯æ°”æ³¡åº”è¯¥èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†é•¿æ–‡æœ¬ï¼Œä¸ä¼šæº¢å‡ºå®¹å™¨è¾¹ç•Œï¼ŒåŒæ—¶ä¿æŒè‰¯å¥½çš„å¯è¯»æ€§å’Œè§†è§‰æ•ˆæœã€‚
          alice: Superlongwordwithoutanyspacestotesttheoverflowwrapandwordbreakbehaviorofthemessagebubblecomponent
        </bb-msg-history>
      </div>
    </section>

    <!-- 8. æ»šåŠ¨é•¿å¯¹è¯ -->
    <section>
      <h2>Scrollable long conversation</h2>
      <div class="card">
        <bb-msg-history>
          alice: Hey, are you free this weekend?
          bob: Yeah, what's up?
          alice: Want to grab coffee?
          bob: Sounds good! When?
          alice: Saturday morning, around 10?
          bob: Perfect. Which place?
          alice: The usual spot on Main St.
          bob: Great, see you then!
          alice: Can't wait!
          bob: Me neither. It's been a while.
          alice: Way too long!
          bob: Agreed. See you Saturday.
          alice: I'll bring that book you wanted.
          bob: Oh right! Thanks for remembering.
          alice: No problem. See you!
          bob: See ya!
        </bb-msg-history>
      </div>
    </section>

    <!-- 9. ç©ºçŠ¶æ€ï¼šæ— æ¶ˆæ¯æ—¶æ˜¾ç¤º "No messages" -->
    <section>
      <h2>Empty state</h2>
      <div class="card">
        <bb-msg-history></bb-msg-history>
      </div>

      <pre><code>&lt;bb-msg-history&gt;&lt;/bb-msg-history&gt;</code></pre>
    </section>

    <!-- 10. å¤šäººæ··åˆå¯¹è¯ -->
    <section>
      <h2>Multi-party mixed conversation</h2>
      <div class="card">
        <bb-msg-history id="multi-party-demo">
          me: Hey everyone, let's have a meeting
          alice: Sure thing
          bob: On my way
          dave: I'm here too
          me: Let's get started
          alice: OK
          bob: No problem
          dave: Got it
          me: That's all for today
        </bb-msg-history>
      </div>
      <script>
        customElements.whenDefined('bb-msg-history').then(() => {
          const el = document.getElementById('multi-party-demo');
          el.setAuthor('me', { avatar: 'ğŸ˜', side: 'right' });
          el.setAuthor('alice', { avatar: 'ğŸ‘©', side: 'left', bubbleColor: '#e0f2fe' });
          el.setAuthor('bob', { avatar: 'ğŸ‘¨', side: 'left', bubbleColor: '#ecfdf5' });
        });
      </script>
    </section>

    <!-- 11. è‡ªå®šä¹‰æœ€å¤§é«˜åº¦ï¼šé€šè¿‡ CSS å˜é‡ --bb-max-height æ§åˆ¶ -->
    <section>
      <h2>Custom max-height â€” CSS variable</h2>
      <div class="card">
        <bb-msg-history style="--bb-max-height: 200px;">
          alice: This container is only 200px tall
          bob: So it should scroll sooner
          alice: Let's add more messages
          bob: To demonstrate the effect
          alice: One more line
          bob: And another
          alice: Almost there
          bob: Yep, scrolling now!
          alice: Great, it works
          bob: Nice and compact
        </bb-msg-history>
      </div>

      <pre><code>&lt;bb-msg-history style="--bb-max-height: 200px;"&gt;
  ...
&lt;/bb-msg-history&gt;</code></pre>
    </section>

    <!-- 12. åŠ¨æ€æ›´æ–°ï¼šMutationObserver è‡ªåŠ¨é‡æ¸²æŸ“ -->
    <section>
      <h2>Dynamic update â€” reactive content</h2>
      <div class="card">
        <bb-msg-history id="dynamic-demo" style="--bb-max-height: 200px;">
          alice: Click the button below to add a message
        </bb-msg-history>
      </div>
      <button id="add-msg-btn" style="
        margin-top: 8px;
        margin-bottom: 8px;
        padding: 8px 16px;
        font-size: 14px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: #fafafa;
        cursor: pointer;
      ">Add message</button>
      <script>
        (() => {
          const el = document.getElementById('dynamic-demo');
          const btn = document.getElementById('add-msg-btn');
          const authors = ['bob', 'charlie', 'alice'];
          const msgs = [
            'Hey, I was added dynamically!',
            'Me too, via MutationObserver!',
            'The component re-renders automatically',
            'No manual refresh needed',
            'Pretty cool, right?',
          ];
          let i = 0;
          btn.addEventListener('click', () => {
            const author = authors[i % authors.length];
            const text = msgs[i % msgs.length];
            el.textContent += `\n${author}: ${text}`;
            i++;
          });
        })();
      </script>

      <pre><code>// Component auto re-renders when textContent changes
const el = document.querySelector('bb-msg-history');
el.textContent += '\nbob: Added dynamically!';</code></pre>
    </section>

    <!-- 13. Dark mode é¢„è§ˆ -->
    <section>
      <h2>Dark mode â€” prefers-color-scheme</h2>
      <div class="card" style="background: #111827; padding: 16px; border-radius: 8px;">
        <bb-msg-history id="dark-demo" style="color-scheme: dark;">
          alice: Dark mode conversation
          bob: Adapts to dark theme automatically
          alice: Bubbles and backgrounds change
          bob: Nice!
        </bb-msg-history>
      </div>
      <p style="margin-top: 12px; font-size: 13px; color: #999;">
        â†‘ Toggle your system to dark mode to see it in action across the whole page, or inspect this card which forces a dark background.
      </p>
    </section>

    <section>
      <h2>Installation</h2>
      <div class="install">
        <p>npm</p>
        <pre><code>npm install @bbki.ng/bb-msg-history</code></pre>

        <p style="margin-top: 20px;">CDN</p>
        <pre><code>&lt;script type="module" src="https://cdn.jsdelivr.net/npm/@bbki.ng/bb-msg-history@latest/dist/index.js"&gt;&lt;/script&gt;</code></pre>
      </div>
    </section>
  </div>
</body>
</html>
